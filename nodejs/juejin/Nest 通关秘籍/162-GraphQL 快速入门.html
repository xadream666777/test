<header>
        <style>
            .markdown-body{
                width: 80%;
                margin: auto;
            }
            .code-block-extension-header{
                display: none;
            }
        </style>
    </header><div class="markdown-body"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºå‰ç«¯å¼€å‘ï¼Œæƒ³å¿…ç»å¸¸åšçš„äº‹æƒ…å°±æ˜¯ï¼šè°ƒæ¥å£ã€ç”»é¡µé¢ã€è°ƒæ¥å£ã€ç”»é¡µé¢...</p>
<p>è°ƒç”¨çš„æ¥å£å¤§æ¦‚ç‡æ˜¯ restful çš„ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼è¿™ç§ï¼š</p>
<p>/students æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯</p>
<p>/student/1 æŸ¥è¯¢ id ä¸º 1 çš„å­¦ç”Ÿä¿¡æ¯</p>
<p>ä¸Šé¢è¯´çš„æ˜¯ get è¯·æ±‚ã€‚</p>
<p>å¦‚æœå¯¹ /student/1 å‘é€ POSTã€PUTã€DELETE è¯·æ±‚ï¼Œå°±åˆ†åˆ«ä»£è¡¨äº†æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ã€‚</p>
<p>è¿™å°±æ˜¯ restful é£æ ¼çš„ web æ¥å£ã€‚</p>
<p>è¿™ç§æ¥å£è¿”å›ä»€ä¹ˆä¿¡æ¯æ˜¯æœåŠ¡ç«¯é‚£è¾¹å†³å®šçš„ï¼Œå®¢æˆ·ç«¯åªæ˜¯ä¼ ä¸€ä¸‹å‚æ•°ã€‚</p>
<p>è€Œä¸åŒåœºæ™¯ä¸‹éœ€è¦çš„æ•°æ®ä¸åŒï¼Œè¿™æ—¶å€™å¯èƒ½å°±å¾—æ–°å¼€å‘ä¸€ä¸ªæ¥å£ã€‚ç‰¹åˆ«æ˜¯åœ¨ç‰ˆæœ¬æ›´æ–°çš„æ—¶å€™ï¼Œæ¥å£ä¼šæœ‰æ‰€å˜åŠ¨ã€‚</p>
<p>è¿™æ ·å°±å¾ˆå®¹æ˜“å¯¼è‡´ä¸€å¤§å †ç±»ä¼¼çš„æ¥å£ã€‚</p>
<p>facebook å½“æ—¶ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯ä»–ä»¬åˆ›é€ äº†ä¸€ç§æ–°çš„æ¥å£å®ç°æ–¹æ¡ˆï¼šGraphQLã€‚</p>
<p>ç”¨äº† GraphQL ä¹‹åï¼Œè¿”å›ä»€ä¹ˆæ•°æ®ä¸å†æ˜¯æœåŠ¡ç«¯è¯´äº†ç®—ï¼Œè€Œæ˜¯å®¢æˆ·ç«¯è‡ªå·±å†³å®šã€‚</p>
<p>æœåŠ¡ç«¯åªéœ€è¦æä¾›ä¸€ä¸ªæ¥å£ï¼Œå®¢æˆ·ç«¯é€šè¿‡è¿™ä¸ªæ¥å£å°±å¯ä»¥å–ä»»æ„æ ¼å¼çš„æ•°æ®ï¼Œå®ç° CRUDã€‚</p>
<p>æ¯”å¦‚æƒ³æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿï¼Œå°±å¯ä»¥è¿™æ ·ï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/69766c3214044ea9bb39bccec27ea53f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>æƒ³å†æŸ¥è¯¢ä»–ä»¬çš„å¹´é¾„ï¼Œå°±å¯ä»¥è¿™æ ·ï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e4e0ec81d7bd4ed4bf6c0db6313cdabd~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>æƒ³æŸ¥è¯¢è€å¸ˆçš„åå­—å’Œä»–æ•™çš„å­¦ç”Ÿï¼Œå°±å¯ä»¥è¿™æ ·ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/29f59758180547c0b5e36f6f8bb85ad4~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>è€Œè¿™äº›éƒ½æ˜¯åœ¨ä¸€ä¸ª http æ¥å£é‡Œå®Œæˆçš„ï¼</p>
<p>æ„Ÿå—äº† GraphQL çš„å¥½å¤„äº†æ²¡ï¼Ÿ</p>
<p><strong>ä¸€ä¸ª http æ¥å£å°±èƒ½å®ç°æ‰€æœ‰çš„ CRUDï¼</strong></p>
<p>é‚£è¿™ä¹ˆå¼ºå¤§çš„ GraphQL æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆå†™ä¸ª demo å¿«é€Ÿå…¥é—¨ä¸€ä¸‹ï¼š</p>
<p>facebook æä¾›äº† graphql çš„ npm åŒ…ï¼Œä½†é‚£ä¸ªå°è£…çš„ä¸å¤Ÿå¥½ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šç”¨åŸºäº graphql åŒ…çš„ @apollo/server å’Œ @apollo/client çš„åŒ…æ¥å®ç° graphqlã€‚</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">bash</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-built_in">mkdir</span> graphql-crud-demo</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-built_in">cd</span> graphql-crud-demo</span>
<span class="code-block-extension-codeLine" data-line-num="3">npm init -y</span>
</code></pre>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fddedf2692a44a91af0ef6c0f02271bb~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=936&amp;h=668&amp;s=94837&amp;e=png&amp;b=010101" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>å®‰è£…ç”¨åˆ°çš„åŒ…ï¼š</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">bash</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install @apollo/server</span>
</code></pre>
<p>ç„¶ååœ¨ index.js å†™ä¸€ä¸‹è¿™æ®µä»£ç ï¼š</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApolloServer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@apollo/server'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">const</span> typeDefs = <span class="hljs-string">`</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">  type Student {</span>
<span class="code-block-extension-codeLine" data-line-num="5">    id: String,</span>
<span class="code-block-extension-codeLine" data-line-num="6">    name: String,</span>
<span class="code-block-extension-codeLine" data-line-num="7">    sex: Boolean</span>
<span class="code-block-extension-codeLine" data-line-num="8">    age: Int</span>
<span class="code-block-extension-codeLine" data-line-num="9">  }</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">  type Teacher {</span>
<span class="code-block-extension-codeLine" data-line-num="12">    id: String,</span>
<span class="code-block-extension-codeLine" data-line-num="13">    name: String,</span>
<span class="code-block-extension-codeLine" data-line-num="14">    age: Int,</span>
<span class="code-block-extension-codeLine" data-line-num="15">    subject: [String],</span>
<span class="code-block-extension-codeLine" data-line-num="16">    students: [Student]</span>
<span class="code-block-extension-codeLine" data-line-num="17">  }</span>
<span class="code-block-extension-codeLine" data-line-num="18"></span>
<span class="code-block-extension-codeLine" data-line-num="19">  type Query {</span>
<span class="code-block-extension-codeLine" data-line-num="20">    students: [Student],</span>
<span class="code-block-extension-codeLine" data-line-num="21">    teachers: [Teacher],</span>
<span class="code-block-extension-codeLine" data-line-num="22">  }</span>
<span class="code-block-extension-codeLine" data-line-num="23"></span>
<span class="code-block-extension-codeLine" data-line-num="24">  schema {</span>
<span class="code-block-extension-codeLine" data-line-num="25">    query: Query</span>
<span class="code-block-extension-codeLine" data-line-num="26">  }</span>
<span class="code-block-extension-codeLine" data-line-num="27">`;</span>
</code></pre>
<p>æ¯”è¾ƒå®¹æ˜“çœ‹æ‡‚ï¼Œå®šä¹‰äº†ä¸€ä¸ª Student çš„å¯¹è±¡ç±»å‹ï¼Œæœ‰ idã€nameã€sexã€age è¿™å‡ ä¸ªå­—æ®µã€‚</p>
<p>åˆå®šä¹‰äº†ä¸€ä¸ª Teacher çš„å¯¹è±¡ç±»å‹ï¼Œæœ‰ idã€nameã€ageã€subjectã€students è¿™å‡ ä¸ªå­—æ®µã€‚students å­—æ®µæ˜¯ä»–æ•™çš„å­¦ç”Ÿçš„ä¿¡æ¯ã€‚</p>
<p>ç„¶åå®šä¹‰äº†æŸ¥è¯¢çš„å…¥å£ï¼Œå¯ä»¥æŸ¥ students å’Œ teachers çš„ä¿¡æ¯ã€‚</p>
<p>è¿™æ ·å°±æ˜¯ä¸€ä¸ª schemaã€‚</p>
<p>å¯¹è±¡ç±»å‹å’Œå¯¹è±¡ç±»å‹ä¹‹é—´æœ‰å…³è”å…³ç³»ï¼Œè€å¸ˆå…³è”äº†å­¦ç”Ÿã€å­¦ç”Ÿä¹Ÿå¯ä»¥å…³è”è€å¸ˆï¼Œå…³è”æ¥å…³è”å»è¿™ä¸å°±æ˜¯ä¸€ä¸ªå›¾ä¹ˆï¼Œä¹Ÿå°±æ˜¯ graphã€‚</p>
<p>GraphQL å…¨ç§°æ˜¯ graph query languageï¼Œå°±æ˜¯ä»è¿™ä¸ªå¯¹è±¡çš„ graph ä¸­æŸ¥è¯¢æ•°æ®çš„ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å£°æ˜çš„åªæ˜¯å¯¹è±¡ç±»å‹çš„å…³ç³»ï¼Œè¿˜è¦çŸ¥é“è¿™äº›ç±»å‹çš„å…·ä½“æ•°æ®ï¼Œå–æ•°æ®çš„è¿™éƒ¨åˆ†å«åš resolverã€‚</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> students = [</span>
<span class="code-block-extension-codeLine" data-line-num="2">    {</span>
<span class="code-block-extension-codeLine" data-line-num="3">      <span class="hljs-attr">id</span>: <span class="hljs-string">'1'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">      <span class="hljs-attr">name</span>: <span class="hljs-keyword">async</span> () =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="5">        <span class="hljs-keyword">await</span> <span class="hljs-string">'å–æ•°æ®'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6">        <span class="hljs-keyword">return</span> <span class="hljs-string">'å…‰å…‰'</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      },</span>
<span class="code-block-extension-codeLine" data-line-num="8">      <span class="hljs-attr">sex</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="9">      <span class="hljs-attr">age</span>: <span class="hljs-number">12</span></span>
<span class="code-block-extension-codeLine" data-line-num="10">    },</span>
<span class="code-block-extension-codeLine" data-line-num="11">    {</span>
<span class="code-block-extension-codeLine" data-line-num="12">      <span class="hljs-attr">id</span>: <span class="hljs-string">'2'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="13">      <span class="hljs-attr">name</span>:<span class="hljs-string">'ä¸œä¸œ'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="14">      <span class="hljs-attr">sex</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="15">      <span class="hljs-attr">age</span>: <span class="hljs-number">13</span></span>
<span class="code-block-extension-codeLine" data-line-num="16">    },</span>
<span class="code-block-extension-codeLine" data-line-num="17">    {</span>
<span class="code-block-extension-codeLine" data-line-num="18">      <span class="hljs-attr">id</span>: <span class="hljs-string">'3'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="19">      <span class="hljs-attr">name</span>:<span class="hljs-string">'å°çº¢'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="20">      <span class="hljs-attr">sex</span>: <span class="hljs-literal">false</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="21">      <span class="hljs-attr">age</span>: <span class="hljs-number">11</span></span>
<span class="code-block-extension-codeLine" data-line-num="22">    },</span>
<span class="code-block-extension-codeLine" data-line-num="23">];</span>
<span class="code-block-extension-codeLine" data-line-num="24"></span>
<span class="code-block-extension-codeLine" data-line-num="25"><span class="hljs-keyword">const</span> teachers = [</span>
<span class="code-block-extension-codeLine" data-line-num="26">  {</span>
<span class="code-block-extension-codeLine" data-line-num="27">    <span class="hljs-attr">id</span>: <span class="hljs-string">'1'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="28">    <span class="hljs-attr">name</span>: <span class="hljs-string">'ç¥å…‰'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="29">    <span class="hljs-attr">sex</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="30">    <span class="hljs-attr">subject</span>: [<span class="hljs-string">'ä½“è‚²'</span>, <span class="hljs-string">'æ•°å­¦'</span>],</span>
<span class="code-block-extension-codeLine" data-line-num="31">    <span class="hljs-attr">age</span>: <span class="hljs-number">28</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="32">    <span class="hljs-attr">students</span>: students</span>
<span class="code-block-extension-codeLine" data-line-num="33">  }</span>
<span class="code-block-extension-codeLine" data-line-num="34">]</span>
<span class="code-block-extension-codeLine" data-line-num="35"></span>
<span class="code-block-extension-codeLine" data-line-num="36"><span class="hljs-keyword">const</span> resolvers = {</span>
<span class="code-block-extension-codeLine" data-line-num="37">    <span class="hljs-title class_">Query</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="38">      <span class="hljs-attr">students</span>: <span class="hljs-function">() =&gt;</span> students,</span>
<span class="code-block-extension-codeLine" data-line-num="39">      <span class="hljs-attr">teachers</span>: <span class="hljs-function">() =&gt;</span> teachers</span>
<span class="code-block-extension-codeLine" data-line-num="40">    }</span>
<span class="code-block-extension-codeLine" data-line-num="41">};</span>
</code></pre>
<p>resolver æ˜¯å–å¯¹è±¡ç±»å‹å¯¹åº”çš„æ•°æ®çš„ï¼Œæ¯ä¸ªå­—æ®µéƒ½å¯ä»¥å†™ä¸€ä¸ª async å‡½æ•°ï¼Œé‡Œé¢æ‰§è¡Œ sqlã€è®¿é—®æ¥å£ç­‰éƒ½å¯ä»¥ï¼Œæœ€ç»ˆè¿”å›å–åˆ°çš„æ•°æ®ã€‚</p>
<p>å½“ç„¶ï¼Œç›´æ¥å†™å…·ä½“çš„æ•°æ®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<p>è¿™æ ·æœ‰äº† schema ç±»å‹å®šä¹‰ï¼Œæœ‰äº†å–æ•°æ®çš„ resovlerï¼Œå°±å¯ä»¥è·‘èµ· graphql æœåŠ¡äº†ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92e02989bef0441da2b47d057ffcda1c~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1400&amp;h=1164&amp;s=182844&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>ä¹Ÿå°±æ˜¯è¿™æ ·ï¼š</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { startStandaloneServer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@apollo/server/standalone'</span> </span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApolloServer</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="4">    typeDefs,</span>
<span class="code-block-extension-codeLine" data-line-num="5">    resolvers,</span>
<span class="code-block-extension-codeLine" data-line-num="6">});</span>
<span class="code-block-extension-codeLine" data-line-num="7">  </span>
<span class="code-block-extension-codeLine" data-line-num="8"><span class="hljs-keyword">const</span> { url } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">startStandaloneServer</span>(server, {</span>
<span class="code-block-extension-codeLine" data-line-num="9">    <span class="hljs-attr">listen</span>: { <span class="hljs-attr">port</span>: <span class="hljs-number">4000</span> },</span>
<span class="code-block-extension-codeLine" data-line-num="10">});</span>
<span class="code-block-extension-codeLine" data-line-num="11">  </span>
<span class="code-block-extension-codeLine" data-line-num="12"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸš€  Server ready at: <span class="hljs-subst">${url}</span>`</span>);</span>
</code></pre>
<p>ä¼ å…¥ schema ç±»å‹å®šä¹‰å’Œå–æ•°æ®çš„ resolverï¼Œå°±å¯ä»¥ç”¨ node æŠŠæœåŠ¡è·‘èµ·æ¥ã€‚</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a76c82f15d347deb8b0dc7bc9e1258f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>æœ‰åŒå­¦å¯èƒ½é—®äº†ï¼Œnode å¯ä»¥ç›´æ¥è§£æ esm æ¨¡å—ä¹ˆï¼Ÿ</p>
<p>å¯ä»¥çš„ã€‚åªéœ€è¦åœ¨ package.json ä¸­å£°æ˜ type ä¸º moduleï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/764dd70c276645b1a20049d0b2605955~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>é‚£æ‰€æœ‰çš„ .js å°±éƒ½ä¼šä½œä¸º esm æ¨¡å—è§£æï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88a61d897c2f4578ad9196303fd98126~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>è·‘èµ·æ¥ä¹‹åï¼Œæµè§ˆå™¨è®¿é—®ä¸€ä¸‹ï¼š</p>
<p>å°±å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ sandboxï¼Œè¿™é‡Œå¯ä»¥æ‰§è¡Œ graphql çš„æŸ¥è¯¢ï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b3d94c3284c84d7ab5e5be77ff428e86~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>ï¼ˆgraphql æ¥å£æ˜¯ç›‘å¬ POST è¯·æ±‚çš„ï¼Œç”¨ get è¯·æ±‚è¿™ä¸ª url æ‰ä¼šè·‘è¿™ä¸ªè°ƒè¯•çš„å·¥å…·ï¼‰</p>
<p>æˆ‘æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„ idã€nameã€age å°±å¯ä»¥è¿™æ ·ï¼š</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">graphql</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-graphql code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">query Query {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    students {</span>
<span class="code-block-extension-codeLine" data-line-num="3">        name,</span>
<span class="code-block-extension-codeLine" data-line-num="4">        id</span>
<span class="code-block-extension-codeLine" data-line-num="5">    }</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b278c7267b504004ab7ae454b5050424~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81b8b08007a34bc996425019a8650349~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>è¿™é‡Œ â€œå…‰å…‰â€ é‚£ä¸ªå­¦ç”Ÿæ˜¯å¼‚æ­¥å–çš„æ•°æ®ï¼Œresolver ä¼šæ‰§è¡Œå¯¹åº”çš„å¼‚æ­¥å‡½æ•°ï¼Œæ‹¿åˆ°æœ€ç»ˆæ•°æ®ï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f11da7e9bb294f35a96b8ab225353ef8~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>å–è€å¸ˆçš„ä¿¡æ¯å°±å¯ä»¥è¿™æ ·ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ecd1871863014c3dafe5d3760efe03c9~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ª graphql æ¥å£ï¼</p>
<p>æ„Ÿè§‰åˆ°ä»€ä¹ˆå«å®¢æˆ·ç«¯å†³å®šå–ä»€ä¹ˆæ•°æ®äº†ä¹ˆï¼Ÿ</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿™é‡Œæ˜¯åœ¨ sandbox é‡Œæµ‹çš„ï¼Œç”¨ @apollo/client åŒ…ä¹Ÿå¾ˆç®€å•ã€‚</p>
<p>æ¯”å¦‚ react çš„ graphql å®¢æˆ·ç«¯æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1bc53b8890a94cb183fe664fe801049e~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>ä¸€ä¸ª gql çš„ api æ¥å†™æŸ¥è¯¢è¯­è¨€ï¼Œä¸€ä¸ª useQuery çš„ api æ¥æ‰§è¡ŒæŸ¥è¯¢ã€‚</p>
<p>å­¦èµ·æ¥å¾ˆç®€å•ã€‚</p>
<p>æˆ‘ä»¬ä¹‹åè¿˜æ˜¯ç›´æ¥åœ¨ sandbox é‡Œæµ‹è¯•ã€‚</p>
<p>æœ‰çš„åŒå­¦å¯èƒ½ä¼šè¯´ï¼Œå¦‚æœæˆ‘æƒ³æŸ¥è¯¢æŸä¸ªåå­—çš„è€å¸ˆçš„ä¿¡æ¯å‘¢ï¼Ÿ</p>
<p>æ€ä¹ˆä¼ å‚æ•°ï¼Ÿ</p>
<p>graphql å½“ç„¶æ˜¯æ”¯æŒçš„ï¼Œè¿™æ ·å†™ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8b2178e3ad842fba02af787140d7f70~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1226&amp;h=1112&amp;s=143647&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">ini</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-ini code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">type Query {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    students: <span class="hljs-section">[Student]</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    teachers: <span class="hljs-section">[Teacher]</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">    studentsbyTeacherName(name: String!): <span class="hljs-section">[Student]</span></span>
<span class="code-block-extension-codeLine" data-line-num="5">}</span>
</code></pre>
<p>æ–°åŠ ä¸€ä¸ª query å…¥å£ï¼Œå£°æ˜ä¸€ä¸ª name çš„å‚æ•°ã€‚ï¼ˆè¿™é‡Œ String åçš„ ! ä»£è¡¨ä¸èƒ½ä¸ºç©ºï¼‰</p>
<p>ç„¶åå®ƒå¯¹åº”çš„ resolver å°±æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/46045692e6374bcfacaa01b5f3c11308~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1120&amp;h=946&amp;s=132917&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">const</span> resolvers = {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    <span class="hljs-title class_">Query</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="3">      <span class="hljs-attr">students</span>: <span class="hljs-function">() =&gt;</span> students,</span>
<span class="code-block-extension-codeLine" data-line-num="4">      <span class="hljs-attr">teachers</span>: <span class="hljs-function">() =&gt;</span> teachers,</span>
<span class="code-block-extension-codeLine" data-line-num="5">      <span class="hljs-attr">studentsbyTeacherName</span>: <span class="hljs-keyword">async</span> (...args) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="6">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(args);</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">        <span class="hljs-keyword">await</span> <span class="hljs-string">'æ‰§è¡Œäº†ä¸€ä¸ªå¼‚æ­¥æŸ¥è¯¢'</span></span>
<span class="code-block-extension-codeLine" data-line-num="9">        <span class="hljs-keyword">return</span> students</span>
<span class="code-block-extension-codeLine" data-line-num="10">      }</span>
<span class="code-block-extension-codeLine" data-line-num="11">    }</span>
<span class="code-block-extension-codeLine" data-line-num="12">};</span>
</code></pre>
<p>studentsbyTeacherName å­—æ®µçš„ resolver æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œé‡Œé¢æ‰§è¡Œäº†æŸ¥è¯¢ï¼Œç„¶åè¿”å›äº†æŸ¥åˆ°çš„å­¦ç”Ÿä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬æ‰“å°ä¸‹å‚æ•°çœ‹çœ‹ä¼ è¿‡æ¥çš„æ˜¯ä»€ä¹ˆã€‚</p>
<p>æœ‰å‚æ•°çš„æŸ¥è¯¢æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc9883cfac5c4990a19e3804ea397d8f~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>ä¼ å…¥è€å¸ˆçš„ name å‚æ•°ä¸º 111ï¼Œè¿”å›æŸ¥åˆ°çš„å­¦ç”Ÿçš„ idã€name ä¿¡æ¯ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°è¿”å›çš„å°±æ˜¯æŸ¥è¯¢åˆ°çš„ç»“æœã€‚</p>
<p>è€ŒæœåŠ¡ç«¯çš„ resolver æ¥æ”¶åˆ°çš„å‚æ•°æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ec04705f8a04fe78a88d61fb74d1033~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>å…¶ä½™çš„å‡ ä¸ªå‚æ•°ä¸ç”¨ç®¡ï¼Œåªè¦çŸ¥é“ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„æŸ¥è¯¢å‚æ•°å°±å¥½äº†ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™ä¸ª name å‚æ•°å®ç°å¼‚æ­¥çš„æŸ¥è¯¢ï¼Œç„¶åè¿”å›æ•°æ®ã€‚</p>
<p>è¿™å°±å®ç°äº†æœ‰å‚æ•°çš„æŸ¥è¯¢ã€‚</p>
<p>ä¸æ˜¯è¯´ graphql èƒ½å–ä»£ restful åš CRUD ä¹ˆï¼Ÿé‚£å¢åˆ æ”¹æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>å…¶å®çœ‹åˆ°ä¸Šé¢çš„æœ‰å‚æ•°çš„æŸ¥è¯¢åº”è¯¥å°±èƒ½æƒ³åˆ°äº†ï¼Œå…¶å®å†™èµ·æ¥å·®ä¸å¤šã€‚</p>
<p>åœ¨ schema é‡Œæ·»åŠ è¿™æ ·ä¸€æ®µç±»å‹å®šä¹‰ï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d60bf2fdfd24d019ba09a3ec5a3c41b~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp#?w=1186&amp;h=1100&amp;s=153842&amp;e=png&amp;b=1f1f1f" alt="" loading="lazy" class="medium-zoom-image"></p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">grqphql</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-grqphql code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">type Res {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    success: Boolean</span>
<span class="code-block-extension-codeLine" data-line-num="3">    id: String</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">type Mutation {</span>
<span class="code-block-extension-codeLine" data-line-num="7">    addStudent(name:String! age:Int! sex:Boolean!): Res</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">    updateStudent(id: String! name:String! age:Int! sex:Boolean!): Res</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">    deleteStudent(id: String!): Res</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
<span class="code-block-extension-codeLine" data-line-num="13"></span>
<span class="code-block-extension-codeLine" data-line-num="14">schema {</span>
<span class="code-block-extension-codeLine" data-line-num="15">    mutation: Mutation</span>
<span class="code-block-extension-codeLine" data-line-num="16">    query: Query</span>
<span class="code-block-extension-codeLine" data-line-num="17">}</span>
</code></pre>
<p>å’Œæœ‰å‚æ•°çš„æŸ¥è¯¢å·®ä¸å¤šï¼Œåªä¸è¿‡è¿™éƒ¨åˆ†å¢åˆ æ”¹çš„ç±»å‹è¦å®šä¹‰åœ¨ mutation éƒ¨åˆ†ã€‚</p>
<p>ç„¶å resolver ä¹Ÿè¦æœ‰å¯¹åº”çš„å®ç°ï¼š</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">addStudent</span> (_, { name, age, sex }) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    students.<span class="hljs-title function_">push</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="3">        <span class="hljs-attr">id</span>: <span class="hljs-string">'ä¸€ä¸ªéšæœº id'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="4">        name,</span>
<span class="code-block-extension-codeLine" data-line-num="5">        age,</span>
<span class="code-block-extension-codeLine" data-line-num="6">        sex</span>
<span class="code-block-extension-codeLine" data-line-num="7">    });</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="9">      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="10">      <span class="hljs-attr">id</span>: <span class="hljs-string">'xxx'</span></span>
<span class="code-block-extension-codeLine" data-line-num="11">    }</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
<span class="code-block-extension-codeLine" data-line-num="13"></span>
<span class="code-block-extension-codeLine" data-line-num="14"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateStudent</span> (_, { id, name, age, sex }) {</span>
<span class="code-block-extension-codeLine" data-line-num="15"></span>
<span class="code-block-extension-codeLine" data-line-num="16">    <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="17">      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="18">      <span class="hljs-attr">id</span>: <span class="hljs-string">'xxx'</span></span>
<span class="code-block-extension-codeLine" data-line-num="19">    }</span>
<span class="code-block-extension-codeLine" data-line-num="20">}</span>
<span class="code-block-extension-codeLine" data-line-num="21"></span>
<span class="code-block-extension-codeLine" data-line-num="22"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteStudent</span> (_, { id }) {</span>
<span class="code-block-extension-codeLine" data-line-num="23">    <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="24">      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="25">      <span class="hljs-attr">id</span>: <span class="hljs-string">'xxx'</span></span>
<span class="code-block-extension-codeLine" data-line-num="26">    }</span>
<span class="code-block-extension-codeLine" data-line-num="27">}</span>
<span class="code-block-extension-codeLine" data-line-num="28">  </span>
<span class="code-block-extension-codeLine" data-line-num="29"><span class="hljs-keyword">const</span> resolvers = {</span>
<span class="code-block-extension-codeLine" data-line-num="30">    <span class="hljs-title class_">Query</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="31">      <span class="hljs-attr">students</span>: <span class="hljs-function">() =&gt;</span> students,</span>
<span class="code-block-extension-codeLine" data-line-num="32">      <span class="hljs-attr">teachers</span>: <span class="hljs-function">() =&gt;</span> teachers,</span>
<span class="code-block-extension-codeLine" data-line-num="33">      <span class="hljs-attr">studentsbyTeacherName</span>: <span class="hljs-keyword">async</span> (...args) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="34">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(args);</span>
<span class="code-block-extension-codeLine" data-line-num="35"></span>
<span class="code-block-extension-codeLine" data-line-num="36">        <span class="hljs-keyword">await</span> <span class="hljs-string">'æ‰§è¡Œäº†ä¸€ä¸ªå¼‚æ­¥æŸ¥è¯¢'</span></span>
<span class="code-block-extension-codeLine" data-line-num="37">        <span class="hljs-keyword">return</span> students</span>
<span class="code-block-extension-codeLine" data-line-num="38">      }</span>
<span class="code-block-extension-codeLine" data-line-num="39">    },</span>
<span class="code-block-extension-codeLine" data-line-num="40">    <span class="hljs-title class_">Mutation</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="41">        <span class="hljs-attr">addStudent</span>: addStudent,</span>
<span class="code-block-extension-codeLine" data-line-num="42">        <span class="hljs-attr">updateStudent</span>: updateStudent,</span>
<span class="code-block-extension-codeLine" data-line-num="43">        <span class="hljs-attr">deleteStudent</span>: deleteStudent</span>
<span class="code-block-extension-codeLine" data-line-num="44">    }</span>
<span class="code-block-extension-codeLine" data-line-num="45">};</span>
<span class="code-block-extension-codeLine" data-line-num="46"></span>
</code></pre>
<p>å’Œ query éƒ¨åˆ†å·®ä¸å¤šï¼Œåªä¸è¿‡è¿™é‡Œå®ç°çš„æ˜¯å¢åˆ æ”¹ã€‚</p>
<p>æˆ‘åªå¯¹ addStudent åšäº†å®ç°ã€‚</p>
<p>æˆ‘ä»¬æµ‹è¯•ä¸‹ï¼š</p>
<p>æ‰§è¡Œ addStudentï¼Œæ·»åŠ ä¸€ä¸ªå­¦ç”Ÿï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ccd06869e4ad41d089fa746b37868c23~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>ç„¶åå†æ¬¡æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14e66d3982aa44789cc022c3fb47c38e~tplv-k3u1fbpfcp-jj-mark:1663:0:0:0:q75.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>å°±å¯ä»¥æŸ¥åˆ°åˆšæ¥çš„å°åˆšåŒå­¦ã€‚</p>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸€ä¸ª graphql çš„ POST æ¥å£é‡Œå®Œæˆæ‰€æœ‰çš„ CRUDï¼</p>
<p>å…¨éƒ¨ä»£ç å¦‚ä¸‹ï¼Œå¤§å®¶å¯ä»¥è·‘ä¸€è·‘ï¼ˆæ³¨æ„è¦åœ¨ package.json é‡ŒåŠ ä¸ª type: "module"ï¼‰</p>
<pre><div class="code-block-extension-header" style="background-color: rgb(248, 248, 248);"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><span class="code-block-extension-lang">javascript</span><div class="code-block-extension-copyCodeBtn">å¤åˆ¶ä»£ç </div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApolloServer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@apollo/server'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="hljs-keyword">import</span> { startStandaloneServer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@apollo/server/standalone'</span> </span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4"><span class="hljs-keyword">const</span> typeDefs = <span class="hljs-string">`</span></span>
<span class="code-block-extension-codeLine" data-line-num="5">  type Student {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    id: String,</span>
<span class="code-block-extension-codeLine" data-line-num="7">    name: String,</span>
<span class="code-block-extension-codeLine" data-line-num="8">    sex: Boolean</span>
<span class="code-block-extension-codeLine" data-line-num="9">    age: Int</span>
<span class="code-block-extension-codeLine" data-line-num="10">  }</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12">  type Teacher {</span>
<span class="code-block-extension-codeLine" data-line-num="13">    id: String,</span>
<span class="code-block-extension-codeLine" data-line-num="14">    name: String,</span>
<span class="code-block-extension-codeLine" data-line-num="15">    age: Int,</span>
<span class="code-block-extension-codeLine" data-line-num="16">    subject: [String],</span>
<span class="code-block-extension-codeLine" data-line-num="17">    students: [Student]</span>
<span class="code-block-extension-codeLine" data-line-num="18">  }</span>
<span class="code-block-extension-codeLine" data-line-num="19"></span>
<span class="code-block-extension-codeLine" data-line-num="20">  type Query {</span>
<span class="code-block-extension-codeLine" data-line-num="21">    students: [Student],</span>
<span class="code-block-extension-codeLine" data-line-num="22">    teachers: [Teacher],</span>
<span class="code-block-extension-codeLine" data-line-num="23">    studentsbyTeacherName(name: String!): [Student]</span>
<span class="code-block-extension-codeLine" data-line-num="24">  }</span>
<span class="code-block-extension-codeLine" data-line-num="25"></span>
<span class="code-block-extension-codeLine" data-line-num="26">  type Res {</span>
<span class="code-block-extension-codeLine" data-line-num="27">    success: Boolean</span>
<span class="code-block-extension-codeLine" data-line-num="28">    id: String</span>
<span class="code-block-extension-codeLine" data-line-num="29">  }</span>
<span class="code-block-extension-codeLine" data-line-num="30"></span>
<span class="code-block-extension-codeLine" data-line-num="31">  type Mutation {</span>
<span class="code-block-extension-codeLine" data-line-num="32">    addStudent(name:String! age:Int! sex:Boolean!): Res</span>
<span class="code-block-extension-codeLine" data-line-num="33"></span>
<span class="code-block-extension-codeLine" data-line-num="34">    updateStudent(id: String! name:String! age:Int! sex:Boolean!): Res</span>
<span class="code-block-extension-codeLine" data-line-num="35"></span>
<span class="code-block-extension-codeLine" data-line-num="36">    deleteStudent(id: String!): Res</span>
<span class="code-block-extension-codeLine" data-line-num="37">  }</span>
<span class="code-block-extension-codeLine" data-line-num="38"></span>
<span class="code-block-extension-codeLine" data-line-num="39">  schema {</span>
<span class="code-block-extension-codeLine" data-line-num="40">    mutation: Mutation</span>
<span class="code-block-extension-codeLine" data-line-num="41">    query: Query</span>
<span class="code-block-extension-codeLine" data-line-num="42">  }</span>
<span class="code-block-extension-codeLine" data-line-num="43">`;</span>
<span class="code-block-extension-codeLine" data-line-num="44"></span>
<span class="code-block-extension-codeLine" data-line-num="45"><span class="hljs-keyword">const</span> students = [</span>
<span class="code-block-extension-codeLine" data-line-num="46">    {</span>
<span class="code-block-extension-codeLine" data-line-num="47">      <span class="hljs-attr">id</span>: <span class="hljs-string">'1'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="48">      <span class="hljs-attr">name</span>: <span class="hljs-keyword">async</span> () =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="49">        <span class="hljs-keyword">await</span> <span class="hljs-string">'å–æ•°æ®'</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="50">        <span class="hljs-keyword">return</span> <span class="hljs-string">'å…‰å…‰'</span></span>
<span class="code-block-extension-codeLine" data-line-num="51">      },</span>
<span class="code-block-extension-codeLine" data-line-num="52">      <span class="hljs-attr">sex</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="53">      <span class="hljs-attr">age</span>: <span class="hljs-number">12</span></span>
<span class="code-block-extension-codeLine" data-line-num="54">    },</span>
<span class="code-block-extension-codeLine" data-line-num="55">    {</span>
<span class="code-block-extension-codeLine" data-line-num="56">      <span class="hljs-attr">id</span>: <span class="hljs-string">'2'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="57">      <span class="hljs-attr">name</span>:<span class="hljs-string">'ä¸œä¸œ'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="58">      <span class="hljs-attr">sex</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="59">      <span class="hljs-attr">age</span>: <span class="hljs-number">13</span></span>
<span class="code-block-extension-codeLine" data-line-num="60">    },</span>
<span class="code-block-extension-codeLine" data-line-num="61">    {</span>
<span class="code-block-extension-codeLine" data-line-num="62">      <span class="hljs-attr">id</span>: <span class="hljs-string">'3'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="63">      <span class="hljs-attr">name</span>:<span class="hljs-string">'å°çº¢'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="64">      <span class="hljs-attr">sex</span>: <span class="hljs-literal">false</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="65">      <span class="hljs-attr">age</span>: <span class="hljs-number">11</span></span>
<span class="code-block-extension-codeLine" data-line-num="66">    },</span>
<span class="code-block-extension-codeLine" data-line-num="67">];</span>
<span class="code-block-extension-codeLine" data-line-num="68"></span>
<span class="code-block-extension-codeLine" data-line-num="69"><span class="hljs-keyword">const</span> teachers = [</span>
<span class="code-block-extension-codeLine" data-line-num="70">  {</span>
<span class="code-block-extension-codeLine" data-line-num="71">    <span class="hljs-attr">id</span>: <span class="hljs-string">'1'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="72">    <span class="hljs-attr">name</span>: <span class="hljs-string">'ç¥å…‰'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="73">    <span class="hljs-attr">sex</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="74">    <span class="hljs-attr">subject</span>: [<span class="hljs-string">'ä½“è‚²'</span>, <span class="hljs-string">'æ•°å­¦'</span>],</span>
<span class="code-block-extension-codeLine" data-line-num="75">    <span class="hljs-attr">age</span>: <span class="hljs-number">28</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="76">    <span class="hljs-attr">students</span>: students</span>
<span class="code-block-extension-codeLine" data-line-num="77">  }</span>
<span class="code-block-extension-codeLine" data-line-num="78">]</span>
<span class="code-block-extension-codeLine" data-line-num="79"></span>
<span class="code-block-extension-codeLine" data-line-num="80"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">addStudent</span> (_, { name, age, sex }) {</span>
<span class="code-block-extension-codeLine" data-line-num="81">    students.<span class="hljs-title function_">push</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="82">        <span class="hljs-attr">id</span>: <span class="hljs-string">'ä¸€ä¸ªéšæœº id'</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="83">        name,</span>
<span class="code-block-extension-codeLine" data-line-num="84">        age,</span>
<span class="code-block-extension-codeLine" data-line-num="85">        sex</span>
<span class="code-block-extension-codeLine" data-line-num="86">    });</span>
<span class="code-block-extension-codeLine" data-line-num="87">    <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="88">      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="89">      <span class="hljs-attr">id</span>: <span class="hljs-string">'xxx'</span></span>
<span class="code-block-extension-codeLine" data-line-num="90">    }</span>
<span class="code-block-extension-codeLine" data-line-num="91">}</span>
<span class="code-block-extension-codeLine" data-line-num="92"></span>
<span class="code-block-extension-codeLine" data-line-num="93"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateStudent</span> (_, { id, name, age, sex }) {</span>
<span class="code-block-extension-codeLine" data-line-num="94"></span>
<span class="code-block-extension-codeLine" data-line-num="95">    <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="96">      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="97">      <span class="hljs-attr">id</span>: <span class="hljs-string">'xxx'</span></span>
<span class="code-block-extension-codeLine" data-line-num="98">    }</span>
<span class="code-block-extension-codeLine" data-line-num="99">}</span>
<span class="code-block-extension-codeLine" data-line-num="100"></span>
<span class="code-block-extension-codeLine" data-line-num="101"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteStudent</span> (_, { id }) {</span>
<span class="code-block-extension-codeLine" data-line-num="102">    <span class="hljs-keyword">return</span> {</span>
<span class="code-block-extension-codeLine" data-line-num="103">      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="104">      <span class="hljs-attr">id</span>: <span class="hljs-string">'xxx'</span></span>
<span class="code-block-extension-codeLine" data-line-num="105">    }</span>
<span class="code-block-extension-codeLine" data-line-num="106">}</span>
<span class="code-block-extension-codeLine" data-line-num="107">  </span>
<span class="code-block-extension-codeLine" data-line-num="108"><span class="hljs-keyword">const</span> resolvers = {</span>
<span class="code-block-extension-codeLine" data-line-num="109">    <span class="hljs-title class_">Query</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="110">      <span class="hljs-attr">students</span>: <span class="hljs-function">() =&gt;</span> students,</span>
<span class="code-block-extension-codeLine" data-line-num="111">      <span class="hljs-attr">teachers</span>: <span class="hljs-function">() =&gt;</span> teachers,</span>
<span class="code-block-extension-codeLine" data-line-num="112">      <span class="hljs-attr">studentsbyTeacherName</span>: <span class="hljs-keyword">async</span> (...args) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="113">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(args);</span>
<span class="code-block-extension-codeLine" data-line-num="114"></span>
<span class="code-block-extension-codeLine" data-line-num="115">        <span class="hljs-keyword">await</span> <span class="hljs-string">'æ‰§è¡Œäº†ä¸€ä¸ªå¼‚æ­¥æŸ¥è¯¢'</span></span>
<span class="code-block-extension-codeLine" data-line-num="116">        <span class="hljs-keyword">return</span> students</span>
<span class="code-block-extension-codeLine" data-line-num="117">      }</span>
<span class="code-block-extension-codeLine" data-line-num="118">    },</span>
<span class="code-block-extension-codeLine" data-line-num="119">    <span class="hljs-title class_">Mutation</span>: {</span>
<span class="code-block-extension-codeLine" data-line-num="120">        <span class="hljs-attr">addStudent</span>: addStudent,</span>
<span class="code-block-extension-codeLine" data-line-num="121">        <span class="hljs-attr">updateStudent</span>: updateStudent,</span>
<span class="code-block-extension-codeLine" data-line-num="122">        <span class="hljs-attr">deleteStudent</span>: deleteStudent</span>
<span class="code-block-extension-codeLine" data-line-num="123">    }</span>
<span class="code-block-extension-codeLine" data-line-num="124">};</span>
<span class="code-block-extension-codeLine" data-line-num="125"></span>
<span class="code-block-extension-codeLine" data-line-num="126"><span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApolloServer</span>({</span>
<span class="code-block-extension-codeLine" data-line-num="127">    typeDefs,</span>
<span class="code-block-extension-codeLine" data-line-num="128">    resolvers,</span>
<span class="code-block-extension-codeLine" data-line-num="129">});</span>
<span class="code-block-extension-codeLine" data-line-num="130">  </span>
<span class="code-block-extension-codeLine" data-line-num="131"><span class="hljs-keyword">const</span> { url } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">startStandaloneServer</span>(server, {</span>
<span class="code-block-extension-codeLine" data-line-num="132">    <span class="hljs-attr">listen</span>: { <span class="hljs-attr">port</span>: <span class="hljs-number">4000</span> },</span>
<span class="code-block-extension-codeLine" data-line-num="133">});</span>
<span class="code-block-extension-codeLine" data-line-num="134">  </span>
<span class="code-block-extension-codeLine" data-line-num="135"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸš€  Server ready at: <span class="hljs-subst">${url}</span>`</span>);</span>
</code></pre>
<p>å®Œæˆäº† graphql çš„å…¥é—¨ï¼Œæˆ‘ä»¬å†ç¨å¾®æ€è€ƒä¸‹å®ƒçš„åŸç†ã€‚graphql æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p>
<p>å›é¡¾æ•´ä¸ªæµç¨‹ï¼Œæˆ‘ä»¬å‘ç°æ¶‰åŠåˆ°ä¸¤ç§ DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰ï¼Œä¸€ä¸ªæ˜¯ schema å®šä¹‰çš„ DSLï¼Œä¸€ä¸ªæ˜¯æŸ¥è¯¢çš„ DSLã€‚</p>
<p>æœåŠ¡ç«¯é€šè¿‡ schema å®šä¹‰çš„ DSL æ¥å£°æ˜ graph å›¾ï¼Œé€šè¿‡ resolver æ¥æ¥å—å‚æ•°ï¼Œæ‰§è¡ŒæŸ¥è¯¢å’Œå¢åˆ æ”¹ã€‚</p>
<p>å®¢æˆ·ç«¯é€šè¿‡æŸ¥è¯¢çš„ DSL æ¥å®šä¹‰å¦‚ä½•æŸ¥è¯¢å’Œå¦‚ä½•å¢åˆ æ”¹ï¼Œå†å‘ç»™æœåŠ¡ç«¯æ¥è§£ææ‰§è¡Œã€‚</p>
<p>é€šè¿‡è¿™ç§ DSL å®ç°äº†åŠ¨æ€çš„æŸ¥è¯¢ã€‚</p>
<p>ç¡®å®å¾ˆæ–¹ä¾¿å¾ˆçµæ´»ï¼Œä½†ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå°±æ˜¯ parse DSL ä¸º AST æ€§èƒ½è‚¯å®šæ˜¯ä¸å¦‚ restful é‚£ç§ç›´æ¥æ‰§è¡Œå¢åˆ æ”¹æŸ¥é«˜çš„ã€‚</p>
<p>å…·ä½“è¦ä¸è¦ç”¨ graphql è¿˜æ˜¯è¦æ ¹æ®å…·ä½“åœºæ™¯æ¥åšåˆ¤æ–­ã€‚</p>
<p>æ¡ˆä¾‹ä»£ç åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FQuarkGluonPlasma%2Fnestjs-course-code%2Ftree%2Fmain%2Fgraphql-crud-demo" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/graphql-crud-demo" ref="nofollow noopener noreferrer">å°å†Œä»“åº“</a>ã€‚</p>
<h2 data-id="heading-0">æ€»ç»“</h2>
<p>restful æ¥å£æ˜¯ url ä»£è¡¨èµ„æºï¼ŒGETã€POSTã€PUTã€DELETE è¯·æ±‚ä»£è¡¨å¯¹èµ„æºçš„å¢åˆ æ”¹æŸ¥ã€‚</p>
<p>è¿™ç§æ¥å£è¿”å›ä»€ä¹ˆæ•°æ®å®Œå…¨ç”±æœåŠ¡ç«¯å†³å®šï¼Œæ¯æ¬¡æ¥å£å˜åŠ¨å¯èƒ½å°±å¾—æ–°åŠ ä¸€ç§æ¥å£ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œfacebook åˆ›é€ äº† graphqlï¼Œè¿™ç§æ¥å£è¿”å›ä»€ä¹ˆæ•°æ®å®Œå…¨ç”±å®¢æˆ·ç«¯å†³å®šã€‚å¢åˆ æ”¹æŸ¥é€šè¿‡è¿™ä¸€ä¸ªæ¥å£å°±å¯ä»¥æå®šã€‚</p>
<p>graphql éœ€è¦åœ¨æœåŠ¡ç«¯å®šä¹‰ schemaï¼Œä¹Ÿå°±æ˜¯å®šä¹‰å¯¹è±¡ç±»å‹å’Œå®ƒçš„å­—æ®µï¼Œå¯¹è±¡ç±»å‹å’Œå¯¹è±¡ç±»å‹ä¹‹é—´ä¼šæœ‰å…³è”ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª graphï¼ŒæŸ¥è¯¢å°±æ˜¯ä»è¿™ä¸ª graph é‡ŒæŸ¥è¯¢æ•°æ®ã€‚</p>
<p>é™¤äº† schema å¤–ï¼Œè¿˜éœ€è¦æœ‰ resolverï¼Œå®ƒè´Ÿè´£æ¥å—å®¢æˆ·ç«¯çš„å‚æ•°ï¼Œå®Œæˆå…·ä½“æ•°æ®çš„å¢åˆ æ”¹æŸ¥ã€‚</p>
<p>graphql ä¼šæš´éœ²ä¸€ä¸ª post æ¥å£ï¼Œé€šè¿‡æŸ¥è¯¢è¯­è¨€çš„è¯­æ³•å°±å¯ä»¥ä»é€šè¿‡è¿™ä¸ªæ¥å£å®Œæˆæ‰€æœ‰å¢åˆ æ”¹æŸ¥ã€‚</p>
<p>æœ¬åœ°æµ‹è¯•çš„æ—¶å€™ï¼Œget è¯·æ±‚ä¼šè·‘ä¸€ä¸ª sandboxï¼Œå¯ä»¥åœ¨è¿™é‡Œæµ‹è¯•æ¥å£ã€‚</p>
<p>æ•´ä¸ªæµç¨‹æ¶‰åŠåˆ°ä¸¤ç§æ–°è¯­è¨€ï¼š schema å®šä¹‰è¯­è¨€å’Œ query æŸ¥è¯¢è¯­è¨€ã€‚å…¥é—¨ä¹‹åå‘æ·±å…¥çš„è¯å°±æ˜¯è¦å­¦ä¸‹è¿™ä¸¤ç§ DSL çš„æ›´å¤šè¯­æ³•ã€‚</p>
<p>æ„Ÿå—åˆ° graphql çš„å¼ºå¤§ä¹‹å¤„äº†ä¹ˆï¼Ÿä¸€ä¸ªæ¥å£å°±å¯ä»¥å®ç°æ‰€æœ‰çš„ CRUDï¼</p></div>